# 現在のプロジェクト状況：土器修復プロジェクト

## 1. 環境
*   **Blender**: 4.2 (起動中)
*   **接続方式**: Model Context Protocol (MCP) `blender-mcp` アドオンを使用。
*   **使用アドオン**: **RBDLab** (破壊シミュレーション用)

## 2. これまでの経緯
### (1) 土器の用意
*   当初「縄文火焔型土器」のスキャンモデルを使用したが、形状が複雑すぎて破壊（Fracture）時にエラー（トゲトゲのノイズ）が多発。
*   解決策として、Blender内で**簡易的な土器（Lathe_Pot）**をスクリプトで生成。
    *   中心軸から回転（Screw）させて作った綺麗な形状。
    *   これにより、RBDLabでの破壊がきれいに成功するようになった。

### (2) 破壊シミュレーション (Fracture)
*   **手法**: RBDLabの `Scatter` (点群配置) -> `Fracture` (Cell Fracture) を使用。
*   **★重要検討事項 (2026/01/07更新)**:
    *   **課題**: `Apply Fractures` ボタンに対応するAPIコマンドが存在せず、無理にスクリプト化すると物理演算が不安定（爆発）になることが判明。
    *   **決定方針**: **「生成〜破壊」まではスクリプト自動化、「物理確定(Apply)」のみ手動で行う半自動フロー** を採用。
    *   これにより、安定した品質のデータを確実に量産する。
*   **設定**:
    *   `Scatter`: Standard Scatter (決定ボタンを押して確定済み)。
    *   `Fracture`: Noise 0.05。
    *   **物理**: 床（Passive）と破片（Active）を設定し、重力でバラバラになることを確認済み。

### (3) 技術検証 (Feasibility Check)
*   **Check 1: 断面ラベルの取得** (完了)
    *   **結果**: 成功。断面（赤）と表面（青）の塗り分けを確認。
*   **Check 2: 隣接関係（正解ペア）の取得** (完了)
    *   **手法**: 多数決＆平滑化セグメンテーション (V6)。
    *   **結果**: 170個の断面データ抽出に成功。接合線の可視化も完了。
*   **Check 4: データの書き出し** (完了)
    *   **結果**: 成功。点群データと `adjacency.json` の書き出しを確認。

## 3. 次のステップ：修復AI開発 (Reconstruction)
これから行う作業は、AIモデル（PointNet++等のGNN）の学習と実装です。

1.  **データ量産**:
    *   上記の「半自動フロー」で、数百〜数千個の土器データを生成する。
2.  **学習**:
    *   生成したデータを用いて、「断面検出」と「ペアリング」のAIを学習させる。
（詳細は `ai_training_plan.md` 参照）

## 4. ファイル構成
*   `reconstruction_plan.md`: 修復アルゴリズムの設計図。
*   `ai_training_plan.md`: AI学習データの生成計画。
*   `task.md`: タスク進行管理表。

---
**今の指示待ち状態:**
「量産体制の構築（ループ処理の実装）に進んで」と言えば、次のステップに進みます。
